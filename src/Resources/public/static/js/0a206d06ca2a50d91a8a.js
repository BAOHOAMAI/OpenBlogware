(window["webpackJsonpPluginwerkl-open-blogware"]=window["webpackJsonpPluginwerkl-open-blogware"]||[]).push([[462],{3577:function(){},2462:function(e,r,l){"use strict";l.r(r),l.d(r,{default:function(){return o}});var t=JSON.parse('{"blog.module.detail":{"werkl_blog_entries":["title","slug","teaser","authorId","publishedAt","blogCategories"]}}');l(7626);let{Component:n}=Shopware,{mapPageErrors:a,mapPropertyErrors:i}=n.getComponentHelper();var o={template:'{% block sw_cms_sidebar_page_settings %}\r\n    <sw-sidebar-item\r\n        ref="sidebarItem"\r\n        icon="regular-info-circle"\r\n        badge-type="error"\r\n        :title="$tc(\'werkl-blog.detail.sidebar.heading\')"\r\n        :has-simple-badge="OpenBlogwareDetailError"\r\n        :disabled="page.locked || disabled"\r\n    >\r\n        {% block werkl_blog_cms_sidebar_page_basic_information %}\r\n            <sw-sidebar-collapse :expand-on-loading="true">\r\n                {% block werkl_blog_cms_sidebar_page_basic_information_header %}\r\n                    <template #header>\r\n                        <span>{{ $tc(\'werkl-blog.detail.sidebar.basicInformation\') }}</span>\r\n                    </template>\r\n                {% endblock %}\r\n\r\n                {% block werkl_blog_cms_sidebar_page_basic_information_form %}\r\n                    <template #content>\r\n                        <div class="sw-cms-sidebar__settings">\r\n                            {% block werkl_blog_cms_sidebar_page_basic_information_title_field %}\r\n                                <sw-text-field\r\n                                    required\r\n                                    name="sw-field--blog-title"\r\n                                    v-model:value="blog.title"\r\n                                    :label="$tc(\'werkl-blog.detail.titleLabel\')"\r\n                                    :placeholder="$tc(\'werkl-blog.detail.titlePlaceholder\')"\r\n                                    :error="blogTitleError"\r\n                                ></sw-text-field>\r\n                            {% endblock %}\r\n\r\n                            {% block werkl_blog_cms_sidebar_page_basic_information_slug_field %}\r\n                                <sw-text-field\r\n                                    required\r\n                                    disabled\r\n                                    name="sw-field--blog-slug"\r\n                                    v-model:value="blog.slug"\r\n                                    :label="$tc(\'werkl-blog.detail.slugLabel\')"\r\n                                    :error="blogSlugError"\r\n                                    :placeholder="$tc(\'werkl-blog.detail.slugPlaceholder\')"\r\n                                ></sw-text-field>\r\n                            {% endblock %}\r\n                            <div class="sw-field">\r\n                                <span class="sw-field__label">URL</span>\r\n                                <a\r\n                                    :href="`/blog/${blog.slug}`"\r\n                                    target="_blank"\r\n                                    class="werkl-blog-preview"\r\n                                >\r\n                                    /blog/{{blog.slug}}\r\n                                </a>\r\n                            </div>\r\n                            {% block werkl_blog_cms_sidebar_page_basic_information_teaser_field %}\r\n                                <sw-textarea-field\r\n                                    type="textarea"\r\n                                    name="sw-field--blog-teaser"\r\n                                    v-model:value="blog.teaser"\r\n                                    :label="$tc(\'werkl-blog.detail.teaserLabel\')"\r\n                                    :placeholder="$tc(\'werkl-blog.detail.teaserPlaceholder\')"\r\n                                    :error="blogTeaserError"\r\n                                ></sw-textarea-field>\r\n                            {% endblock %}\r\n\r\n                            {% block werkl_blog_cms_sidebar_page_basic_information_image_field %}\r\n                                <sw-upload-listener\r\n                                    :uploadTag="blog.id"\r\n                                    @media-upload-finish="onSetMediaItem"\r\n                                    autoUpload>\r\n                                </sw-upload-listener>\r\n\r\n                                <sw-media-compact-upload-v2\r\n                                    variant="regular"\r\n                                    :label="$tc(\'werkl-blog.detail.teaserImageLabel\')"\r\n                                    :source="mediaItem"\r\n                                    :uploadTag="blog.id"\r\n                                    :defaultFolder="blog.getEntityName()"\r\n                                    :allowMultiSelect="false"\r\n                                    :fileAccept="fileAccept"\r\n                                    @media-upload-remove-image="onRemoveMediaItem"\r\n                                    @selection-change="setMedia"\r\n                                    @media-drop="onMediaDropped"\r\n                                ></sw-media-compact-upload-v2>\r\n                            {% endblock %}\r\n                        </div>\r\n                    </template>\r\n                {% endblock %}\r\n            </sw-sidebar-collapse>\r\n        {% endblock %}\r\n\r\n        {% block werkl_blog_cms_sidebar_page_settings %}\r\n            <sw-sidebar-collapse :expand-on-loading="true">\r\n                {% block werkl_blog_cms_sidebar_page_settings_header %}\r\n                    <template #header>\r\n                        <span>{{ $tc(\'werkl-blog.detail.sidebar.settings\') }}</span>\r\n                    </template>\r\n                {% endblock %}\r\n\r\n                {% block werkl_blog_cms_sidebar_page_settings_form %}\r\n                    <template #content>\r\n                        <div\r\n                            class="sw-cms-sidebar__settings"\r\n                        >\r\n                            <div>\r\n                                {% block werkl_blog_cms_sidebar_page_settings_visibility_field %}\r\n                                    <sw-switch-field\r\n                                        type="switch"\r\n                                        class="werkl-field--switch"\r\n                                        name="sw-field--blog-active"\r\n                                        :label="$tc(\'werkl-blog.detail.visibility.label\')"\r\n                                        v-model:value="blog.active">\r\n                                    </sw-switch-field>\r\n                                {% endblock %}\r\n\r\n                                {% block werkl_blog_cms_sidebar_page_settings_detail_teaser_field %}\r\n                                    <sw-switch-field\r\n                                        type="switch"\r\n                                        class="werkl-field--switch"\r\n                                        name="sw-field--blog-detailTeaser"\r\n                                        :label="$tc(\'werkl-blog.detail.detailTeaser.label\')"\r\n                                        v-model:value="blog.detailTeaserImage">\r\n                                    </sw-switch-field>\r\n                                {% endblock %}\r\n                            </div>\r\n\r\n                            {% block werkl_blog_cms_sidebar_page_settings_published_at_field %}\r\n                                <sw-datepicker\r\n                                    required\r\n                                    dateType="date"\r\n                                    v-model:value="blog.publishedAt"\r\n                                    name="sw-field--blog-publishedAt"\r\n                                    :label="$tc(\'werkl-blog.detail.publishedAtLabel\')"\r\n                                    :error="blogPublishedAtError"\r\n                                ></sw-datepicker>\r\n                            {% endblock %}\r\n\r\n                            {% block werkl_blog_cms_sidebar_page_settings_author_field %}\r\n                                <sw-entity-single-select\r\n                                    required\r\n                                    v-model:value="blog.authorId"\r\n                                    name="sw-field--blog-author"\r\n                                    labelProperty="translated.name"\r\n                                    class="werkl-field--author"\r\n                                    entity="werkl_blog_author"\r\n                                    :label="$tc(\'werkl-blog.detail.author.label\')"\r\n                                    :placeholder="$tc(\'werkl-blog.detail.author.placeholder\')"\r\n                                    :error="blogAuthorIdError"\r\n                                >\r\n                                    <template #selection-label-property="{item}">\r\n                                        <span>{{ item.firstName }} {{ item.lastName }} <i>({{ item.email }})</i></span>\r\n                                    </template>\r\n                                    <template #result-label-property="{item}">\r\n                                        <span>{{ item.firstName }} {{ item.lastName }} <i>({{ item.email }})</i></span>\r\n                                    </template>\r\n                                </sw-entity-single-select>\r\n                            {% endblock %}\r\n\r\n                            {% block werkl_blog_cms_sidebar_page_settings_sales_channels %}\r\n                                <sw-entity-multi-id-select\r\n                                    v-model:value="blogSalesChannelIds"\r\n                                    :repository="salesChannelRepository"\r\n                                    class="werkl-field--sales-channels"\r\n                                    :label="$tc(\'werkl-blog.detail.salesChannels.labelSalesChannels\')"\r\n                                    :placeholder="$tc(\'werkl-blog.detail.salesChannels.placeholderSalesChannels\')"\r\n                                ></sw-entity-multi-id-select>\r\n                            {% endblock %}\r\n\r\n                            {% block werkl_blog_cms_sidebar_page_settings_category_field %}\r\n                                <werkl-blog-category-tree-field\r\n                                    required\r\n                                    v-model:value="blog.blogCategories"\r\n                                    class="werkl-field--category"\r\n                                    name="sw-field--blog-categories"\r\n                                    :label="$tc(\'werkl-blog.detail.category.label\')"\r\n                                    :placeholder="$tc(\'werkl-blog.detail.category.placeholder\')"\r\n                                    :error="blogBlogCategoriesError"\r\n                                    :categoriesCollection="blog.blogCategories"\r\n                                ></werkl-blog-category-tree-field>\r\n                            {% endblock %}\r\n                            {% block werkl_blog_cms_sidebar_page_settings_tags %}\r\n                                <sw-entity-tag-select\r\n                                    v-if="blog && !isLoading"\r\n                                    v-model:entityCollection="blog.tags"\r\n                                    class="sw-blog-detail-base__tags"\r\n                                    :label="$tc(\'werkl-blog.detail.tagsLabel\')"\r\n                                    :placeholder="$tc(\'werkl-blog.detail.tagsPlaceholder\')"\r\n                                />\r\n                             {% endblock %}\r\n                        </div>\r\n                    </template>\r\n                {% endblock %}\r\n            </sw-sidebar-collapse>\r\n        {% endblock %}\r\n\r\n        {% block werkl_blog_cms_sidebar_page_serp %}\r\n            <sw-sidebar-collapse :expand-on-loading="true">\r\n                {% block werkl_blog_cms_sidebar_page_serp_header %}\r\n                    <template #header>\r\n                        <span>{{ $tc(\'werkl-blog.detail.serp.title\') }}</span>\r\n                    </template>\r\n                {% endblock %}\r\n\r\n                {% block werkl_blog_cms_sidebar_page_serp_form %}\r\n                    <template #content>\r\n                        <div\r\n                            class="sw-cms-sidebar__settings serp-preview-card"\r\n                        >\r\n                            <div class="serp-preview">\r\n                                <h3>{{ blog.metaTitle }}</h3>\r\n                                <cite>{{ blog.slug }}</cite>\r\n                                <p>{{ blog.metaDescription }}</p>\r\n                            </div>\r\n\r\n                            {% block werkl_blog_cms_sidebar_page_serp_meta_title_field %}\r\n                                <sw-text-field\r\n                                    v-model:value="blog.metaTitle"\r\n                                    :maxlength="maximumMetaTitleCharacter"\r\n                                    name="sw-field--blog-metaTitle"\r\n                                    :placeholder="$tc(\'werkl-blog.detail.serp.metaTitle\')"\r\n                                ></sw-text-field>\r\n                            {% endblock %}\r\n\r\n                            {% block werkl_blog_cms_sidebar_page_serp_meta_description_field %}\r\n                                <sw-textarea-field\r\n                                    type="textarea"\r\n                                    v-model:value="blog.metaDescription"\r\n                                    :maxlength="maximumMetaDescriptionCharacter"\r\n                                    name="sw-field--blog-metaDescription"\r\n                                    :placeholder="$tc(\'werkl-blog.detail.serp.metaDescription\')"\r\n                                ></sw-textarea-field>\r\n                            {% endblock %}\r\n                        </div>\r\n                    </template>\r\n                {% endblock %}\r\n            </sw-sidebar-collapse>\r\n        {% endblock %}\r\n    </sw-sidebar-item>\r\n{% endblock %}\r\n\r\n{% block sw_cms_sidebar_layout_assignment %}\r\n    {% block werkl_blog_cms_sidebar_extension_component %}\r\n        <werkl-blog-extension-component-sections\r\n            :position-identifier="positionIdentifierExtension"\r\n            class="werkl-extension-component"\r\n        >\r\n            <template #default="{ componentSection }">\r\n                <sw-sidebar-item\r\n                    v-if="componentSection"\r\n                    :icon="componentSection.props.icon"\r\n                    badge-type="error"\r\n                    :title="componentSection.props.title"\r\n                    :disabled="page.locked || disabled"\r\n                >\r\n                    <sw-iframe-renderer\r\n                        :src="componentSection.src"\r\n                        :location-id="componentSection.props.locationId"\r\n                    ></sw-iframe-renderer>\r\n                </sw-sidebar-item>\r\n            </template>\r\n        </werkl-blog-extension-component-sections>\r\n    {% endblock %}\r\n{% endblock %}',inject:["repositoryFactory","systemConfigApiService"],props:{blog:{type:Object,default:()=>({})}},data(){return{fileAccept:"image/*",maximumMetaTitleCharacter:160,maximumMetaDescriptionCharacter:160}},created(){this.createdComponent()},mounted(){this.openBlogDetailSideBar()},computed:{blogSalesChannelIds:{get(){return this.blog.customFields?.salesChannelIds||[]},set(e){let r=null;e&&e.length>0&&(r=e),this.blog.customFields={...this.blog.customFields,salesChannelIds:r}}},salesChannelRepository(){return this.repositoryFactory.create("sales_channel")},mediaRepository(){return this.repositoryFactory.create("media")},tagRepository(){return this.repositoryFactory.create("tag")},positionIdentifierExtension(){return"werkl-cms-sidebar-extension"},mediaItem(){return this.blog&&this.blog.media},...a(t),...i("blog",["title","slug","teaser","authorId","publishedAt","blogCategories"])},methods:{createdComponent(){this.systemConfigApiService.getValues("WerklOpenBlogware.config").then(e=>{this.maximumMetaTitleCharacter=e["WerklOpenBlogware.config.maximumMetaTitleCharacter"],this.maximumMetaDescriptionCharacter=e["WerklOpenBlogware.config.maximumMetaDescriptionCharacter"]})},onSetMediaItem({targetId:e}){return this.mediaRepository.get(e,Shopware.Context.api).then(r=>{this.blog.mediaId=e,this.blog.media=r})},setMedia([e]){this.blog.mediaId=e.id,this.blog.media=e},onRemoveMediaItem(){this.blog.mediaId=null,this.blog.media=null},onMediaDropped(e){this.onSetMediaItem({targetId:e.id})},openBlogDetailSideBar(){this.$nextTick(()=>{this.$refs.sidebarItem&&"function"==typeof this.$refs.sidebarItem.openContent&&this.$refs.sidebarItem.openContent()})}}}},7626:function(e,r,l){var t=l(3577);t.__esModule&&(t=t.default),"string"==typeof t&&(t=[[e.id,t,""]]),t.locals&&(e.exports=t.locals),(0,l(534).A)("491026ae",t,!0,{})},534:function(e,r,l){"use strict";function t(e,r){for(var l=[],t={},n=0;n<r.length;n++){var a=r[n],i=a[0],o={id:e+":"+n,css:a[1],media:a[2],sourceMap:a[3]};t[i]?t[i].parts.push(o):l.push(t[i]={id:i,parts:[o]})}return l}l.d(r,{A:function(){return _}});var n,a="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!a)throw Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var i={},o=a&&(document.head||document.getElementsByTagName("head")[0]),s=null,d=0,c=!1,b=function(){},g=null,p="data-vue-ssr-id",m="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function _(e,r,l,n){c=l,g=n||{};var a=t(e,r);return u(a),function(r){for(var l=[],n=0;n<a.length;n++){var o=i[a[n].id];o.refs--,l.push(o)}r?u(a=t(e,r)):a=[];for(var n=0;n<l.length;n++){var o=l[n];if(0===o.refs){for(var s=0;s<o.parts.length;s++)o.parts[s]();delete i[o.id]}}}}function u(e){for(var r=0;r<e.length;r++){var l=e[r],t=i[l.id];if(t){t.refs++;for(var n=0;n<t.parts.length;n++)t.parts[n](l.parts[n]);for(;n<l.parts.length;n++)t.parts.push(h(l.parts[n]));t.parts.length>l.parts.length&&(t.parts.length=l.parts.length)}else{for(var a=[],n=0;n<l.parts.length;n++)a.push(h(l.parts[n]));i[l.id]={id:l.id,refs:1,parts:a}}}}function w(){var e=document.createElement("style");return e.type="text/css",o.appendChild(e),e}function h(e){var r,l,t=document.querySelector("style["+p+'~="'+e.id+'"]');if(t){if(c)return b;t.parentNode.removeChild(t)}if(m){var n=d++;r=k.bind(null,t=s||(s=w()),n,!1),l=k.bind(null,t,n,!0)}else r=v.bind(null,t=w()),l=function(){t.parentNode.removeChild(t)};return r(e),function(t){t?(t.css!==e.css||t.media!==e.media||t.sourceMap!==e.sourceMap)&&r(e=t):l()}}var f=(n=[],function(e,r){return n[e]=r,n.filter(Boolean).join("\n")});function k(e,r,l,t){var n=l?"":t.css;if(e.styleSheet)e.styleSheet.cssText=f(r,n);else{var a=document.createTextNode(n),i=e.childNodes;i[r]&&e.removeChild(i[r]),i.length?e.insertBefore(a,i[r]):e.appendChild(a)}}function v(e,r){var l=r.css,t=r.media,n=r.sourceMap;if(t&&e.setAttribute("media",t),g.ssrId&&e.setAttribute(p,r.id),n&&(l+="\n/*# sourceURL="+n.sources[0]+" */",l+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),e.styleSheet)e.styleSheet.cssText=l;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(l))}}}}]);