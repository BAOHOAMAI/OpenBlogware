{"version":3,"file":"index-DR3ZqmOu.js","sources":["../../../app/administration/src/module/blog-module/page/werkl-blog-author/werkl-blog-author-detail/werkl-blog-author-detail.html.twig","../../../app/administration/src/module/blog-module/page/werkl-blog-author/werkl-blog-author-detail/index.js"],"sourcesContent":["{% block werkl_blog_author_detail %}\n    <sw-page class=\"werkl-blog-author-detail\">\n        <template #smart-bar-header>\n            <h2>\n                {% block werkl_blog_author_detail_smart_bar_header_title_text %}\n                {{ salutation(blogAuthor) || $tc('werkl-blog-author.detail.title') }}\n                {% endblock %}\n            </h2>\n        </template>\n\n        <template #smart-bar-actions>\n            <mt-button\n                :router-link=\"{ name: 'blog.module.author.index' }\"\n            >\n                {{ $tc('werkl-blog-author.detail.buttonCancel') }}\n            </mt-button>\n            <sw-button-process\n                :is-loading=\"isLoading\"\n                :process-success=\"processSuccess\"\n                variant=\"primary\"\n                @update:process-success=\"saveFinish\"\n                @click=\"onSave\"\n            >\n                {{ $tc('werkl-blog-author.detail.buttonSave') }}\n            </sw-button-process>\n        </template>\n\n        <template #content>\n            <sw-card-view>\n                <mt-card\n                    v-if=\"blogAuthor\"\n                    :isLoading=\"isLoading\"\n                    :title=\"$tc('werkl-blog-author.detail.title')\"\n                >\n                    <sw-container\n                        columns=\"2fr 4fr 4fr\"\n                        gap=\"16px\"\n                    >\n                        <sw-entity-single-select\n                            class=\"werkl-blog-author-base-form__salutation-select\"\n                            entity=\"salutation\"\n                            :label=\"$tc('werkl-blog-author.detail.salutation.label')\"\n                            :placeholder=\"$tc('werkl-blog-author.detail.salutation.placeholder')\"\n                            :error=\"blogAuthorSalutationIdError\"\n                            labelProperty=\"displayName\"\n                            required\n                            v-model:value=\"blogAuthor.salutationId\"\n                        >\n                    </sw-entity-single-select>\n                        <mt-text-field\n                            required\n                            :error=\"blogAuthorFirstNameError\"\n                            :placeholder=\"$tc('werkl-blog-author.detail.firstName.placeholder')\"\n                            :label=\"$tc('werkl-blog-author.detail.firstName.label')\"\n                            v-model=\"blogAuthor.firstName\"\n                        />\n                        <mt-text-field\n                            required\n                            :error=\"blogAuthorLastNameError\"\n                            :placeholder=\"$tc('werkl-blog-author.detail.lastName.placeholder')\"\n                            :label=\"$tc('werkl-blog-author.detail.lastName.label')\"\n                            v-model=\"blogAuthor.lastName\"\n                        />\n                    </sw-container>\n                    <sw-container\n                        columns=\"6fr 4fr\"\n                        gap=\"24px\"\n                    >\n                        <mt-text-field\n                            :error=\"blogAuthorDisplayNameError\"\n                            :placeholder=\"$tc('werkl-blog-author.detail.displayName.placeholder')\"\n                            :label=\"$tc('werkl-blog-author.detail.displayName.label')\"\n                            v-model=\"blogAuthor.displayName\"\n                        />\n                        <mt-text-field\n                            required\n                            :error=\"blogAuthorEmailError\"\n                            :placeholder=\"$tc('werkl-blog-author.detail.email.placeholder')\"\n                            :label=\"$tc('werkl-blog-author.detail.email.label')\"\n                            v-model=\"blogAuthor.email\"\n                        />\n                    </sw-container>\n                    <sw-container\n                        columns=\"1fr\"\n                        gap=\"32px\"\n                    >\n                        <sw-text-editor\n                            :label=\"$tc('werkl-blog-author.detail.description.label')\"\n                            :placeholder=\"$tc('werkl-blog-author.detail.description.placeholder')\"\n                            :error=\"blogAuthorDescriptionError\"\n                            v-model:value=\"blogAuthor.description\"\n                        >\n                    </sw-text-editor>\n                    </sw-container>\n                    <sw-upload-listener\n                        :uploadTag=\"blogAuthor.id\"\n                        @media-upload-finish=\"onSetMediaItem\"\n                        autoUpload\n                    >\n                </sw-upload-listener>\n                    <sw-media-upload-v2\n                        variant=\"regular\"\n                        :allowMultiSelect=\"false\"\n                        defaultFolder=\"werkl_blog_author\"\n                        :disabled=\"isLoading\"\n                        :fileAccept=\"fileAccept\"\n                        :label=\"$tc('werkl-blog-author.detail.media.label')\"\n                        :uploadTag=\"blogAuthor.id\"\n                        :caption=\"$tc('sw-cms.elements.general.config.caption.mediaUpload')\"\n                        :source=\"blogAuthor.mediaId\"\n                        @media-upload-remove-image=\"onRemoveMediaItem\"\n                        @media-drop=\"onMediaDropped\"\n                    >\n                </sw-media-upload-v2>\n                </mt-card>\n            </sw-card-view>\n        </template>\n    </sw-page>\n{% endblock %}","import './werkl-blog-author-detail.scss';\nimport template from './werkl-blog-author-detail.html.twig';\n\nconst { Mixin } = Shopware;\nconst { Criteria } = Shopware.Data;\nconst { mapPropertyErrors } = Shopware.Component.getComponentHelper();\n\nexport default {\n    template,\n\n    inject: [\n        'repositoryFactory',\n    ],\n\n    mixins: [\n        Mixin.getByName('notification'),\n        Mixin.getByName('salutation'),\n    ],\n\n    shortcuts: {\n        'SYSTEMKEY+S': 'onSave',\n        ESCAPE: 'onCancel',\n    },\n\n    data() {\n        return {\n            isLoading: false,\n            isSaveSuccessful: false,\n            blogAuthor: null,\n            blogAuthorCustomFieldSets: null,\n            processSuccess: false,\n            availableTags: null,\n            fileAccept: 'image/*',\n        };\n    },\n\n    metaInfo() {\n        return {\n            title: this.$createTitle(this.identifier),\n        };\n    },\n\n    computed: {\n        identifier() {\n            return this.blogAuthor !== null ? this.salutation(this.blogAuthor) : '';\n        },\n\n        blogAuthorRepository() {\n            return this.repositoryFactory.create('werkl_blog_author');\n        },\n\n        mediaRepository() {\n            return this.repositoryFactory.create('media');\n        },\n\n        defaultCriteria() {\n            const criteria = new Criteria();\n            criteria\n                .addAssociation('media')\n                .addAssociation('salutation');\n\n            return criteria;\n        },\n\n        customFieldSetRepository() {\n            return this.repositoryFactory.create('custom_field_set');\n        },\n\n        customFieldSetCriteria() {\n            const criteria = new Criteria();\n\n            criteria\n                .addFilter(Criteria.equals('relations.entityName', 'werkl_blog_author'));\n\n            criteria.getAssociation('customFields')\n                .addSorting(Criteria.sort('config.customFieldPosition'));\n\n            return criteria;\n        },\n\n        ...mapPropertyErrors('blogAuthor', [\n            'firstName',\n            'lastName',\n            'displayName',\n            'email',\n            'salutationId',\n            'description',\n        ]),\n    },\n\n    created() {\n        this.createdComponent();\n    },\n\n    methods: {\n        createdComponent() {\n            this.isLoading = true;\n\n            this.blogAuthorRepository.get(\n                this.$route.params.id,\n                Shopware.Context.api,\n                this.defaultCriteria,\n            ).then((blogAuthor) => {\n                this.blogAuthor = blogAuthor;\n                this.isLoading = false;\n            });\n        },\n\n        saveFinish() {\n            this.isSaveSuccessful = false;\n        },\n\n        async onSave() {\n            this.isLoading = true;\n            this.isSaveSuccessful = false;\n\n            return this.blogAuthorRepository.save(this.blogAuthor, Shopware.Context.api).then(() => {\n                this.isLoading = false;\n                this.isSaveSuccessful = true;\n                this.createNotificationSuccess({\n                    message: this.$tc('werkl-blog-author.detail.messageSaveSuccess', 0, {\n                        name: `${this.blogAuthor.firstName} ${this.blogAuthor.lastName}`,\n                    }),\n                });\n                this.$router.push({ name: 'blog.module.author.detail', params: { id: this.blogAuthor.id } });\n            }).catch((exception) => {\n                this.createNotificationError({\n                    message: this.$tc('global.notification.unspecifiedSaveErrorMessage'),\n                });\n                this.isLoading = false;\n                throw exception;\n            });\n        },\n\n        onCancel() {\n            this.$router.push({ name: 'werkl_blog.author.index' });\n        },\n\n        onSetMediaItem({ targetId }) {\n            this.mediaRepository.get(targetId, Shopware.Context.api).then((updatedMedia) => {\n                this.blogAuthor.mediaId = targetId;\n                this.blogAuthor.media = updatedMedia;\n            });\n        },\n\n        onRemoveMediaItem() {\n            this.blogAuthor.mediaId = null;\n            this.blogAuthor.media = null;\n        },\n\n        onMediaDropped(dropItem) {\n            this.onSetMediaItem({ targetId: dropItem.id });\n        },\n    },\n};\n"],"names":["template","Mixin","Criteria","mapPropertyErrors","index","criteria","blogAuthor","exception","targetId","updatedMedia","dropItem"],"mappings":"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"}