{"version":3,"file":"index-CdezLI12.js","sources":["../../../app/administration/src/module/blog-module/page/werkl-blog-list/werkl-blog-list.twig","../../../app/administration/src/module/blog-module/page/werkl-blog-list/index.js"],"sourcesContent":["{% block werkl_blog_list %}\n    <sw-page class=\"werkl-blog-list\">\n        <template #smart-bar-header>\n            <h2>\n                {% block werkl_blog_list_smart_bar_header_title_text %}\n                {{ $tc('werkl-blog.list.textBlogOverview') }}\n                {% endblock %}\n\n            {% block werkl_blog_list_smart_bar_header_amount %}\n                <span\n                    v-if=\"!isLoading\"\n                    class=\"sw-page__smart-bar-amount\"\n                >\n                ({{ total }})\n            </span>\n                {% endblock %}\n            </h2>\n        </template>\n\n        <template #language-switch>\n            <sw-language-switch @on-change=\"changeLanguage\"></sw-language-switch>\n        </template>\n        {% block werkl_blog_list_smart_bar_actions %}\n        <template #smart-bar-actions>\n            {% block werkl_blog_list_smart_bar_actions_add %}\n            <mt-button\n                @click=\"$router.push({ name: 'blog.module.create' })\"\n                variant=\"primary\"\n            >\n                {{ $tc('werkl-blog.list.buttonAddBlogEntry') }}\n            </mt-button>\n            {% endblock %}\n        </template>\n        {% endblock %}\n      \n\n        <template #side-content>\n            {% block werkl_blog_category_side_content %}\n           \n            {% endblock %}\n        </template>\n\n        <template #content>\n            {% block werkl_blog_list_content %}\n            <sw-entity-listing\n                v-if=\"blogEntries\"\n                :items=\"blogEntries\"\n                :repository=\"blogEntriesRepository\"\n                :showSelection=\"false\"\n                :columns=\"columns\"\n                detailRoute=\"blog.module.detail\"\n            >\n                {% block werkl_blog_list_grid_columns_name %}\n                <template #column-active=\"{ item, isInlineEdit }\">\n                    {% block werkl_blog_list_grid_columns_name_inline_edit %}\n                    <template v-if=\"isInlineEdit\">\n                        <mt-checkbox v-model:checked=\"item.active\"></mt-checkbox>\n                    </template>\n                    {% endblock %}\n\n                {% block werkl_blog_list_grid_columns_name_content %}\n                    <template v-else>\n                        <mt-icon\n                            v-if=\"item.active\"\n                            name=\"regular-checkmark-xs\"\n                            size=\"16px\"\n                            class=\"is--active\"\n                        ></mt-icon>\n                        <mt-icon\n                            v-else\n                            name=\"regular-times-xs\"\n                            size=\"16px\"\n                            class=\"is--inactive\"\n                        ></mt-icon>\n                    </template>\n                    {% endblock %}\n                </template>\n                {% endblock %}\n\n            {% block werkl_blog_list_grid_columns_author %}\n                <template #column-author=\"{ item }\">\n                    {% block werkl_blog_list_grid_columns_author_content %}\n                    <router-link\n                        :to=\"{ name: 'blog.module.author.detail', params: { id: item.authorId } }\"\n                    >\n                        {{ salutation(item.blogAuthor) }}\n                    </router-link>\n                    {% endblock %}\n                </template>\n                {% endblock %}\n\n            {% block werkl_blog_list_grid_columns_published %}\n                <template #column-publishedAt=\"{ item }\">\n                    {{ dateFilter(item.publishedAt, { hour: undefined, minute: undefined }) }}\n                </template>\n                {% endblock %}\n            </sw-entity-listing>\n            {% endblock %}\n\n        {% block werkl_blog_list_empty_state %}\n            <sw-empty-state\n                v-if=\"!isLoading && !total\"\n                :title=\"$tc('werkl-blog.list.messageEmpty')\"\n            >\n                {{ $tc('werkl-blog-author.list.messageEmpty') }}\n            </sw-empty-state>\n            {% endblock %}\n        </template>\n    </sw-page>\n{% endblock %}","import template from './werkl-blog-list.twig';\nimport './werkl-blog-list.scss';\n\nconst { Mixin } = Shopware;\nconst Criteria = Shopware.Data.Criteria;\n\nexport default {\n    template,\n\n    inject: ['repositoryFactory'],\n\n    mixins: [\n        Mixin.getByName('salutation'),\n        Mixin.getByName('listing'),\n    ],\n\n    data() {\n        return {\n            categoryId: null,\n            blogEntries: null,\n            total: 0,\n            isLoading: true,\n            currentLanguageId: Shopware.Context.api.languageId,\n        };\n    },\n\n    metaInfo() {\n        return {\n            title: this.$createTitle(),\n        };\n    },\n\n    created() {\n        this.getList();\n    },\n\n    computed: {\n        blogEntriesRepository() {\n            return this.repositoryFactory.create('werkl_blog_entries');\n        },\n\n        blogCategoryRepository() {\n            return this.repositoryFactory.create('werkl_blog_category');\n        },\n\n        dateFilter() {\n            return Shopware.Filter.getByName('date');\n        },\n\n        columns() {\n            return [\n                {\n                    property: 'title',\n                    dataIndex: 'title',\n                    label: this.$tc('werkl-blog.list.table.title'),\n                    routerLink: 'blog.module.detail',\n                    primary: true,\n                    inlineEdit: 'string',\n                },\n                {\n                    property: 'author',\n                    label: this.$tc('werkl-blog.list.table.author'),\n                    inlineEdit: false,\n                },\n                {\n                    property: 'publishedAt',\n                    label: this.$tc('werkl-blog.list.table.publishedAt'),\n                    inlineEdit: false,\n                },\n                {\n                    property: 'active',\n                    label: this.$tc('werkl-blog.list.table.active'),\n                    inlineEdit: 'boolean',\n                },\n            ];\n        },\n    },\n\n    methods: {\n        changeLanguage(newLanguageId) {\n            this.currentLanguageId = newLanguageId;\n            this.getList();\n        },\n\n        changeCategoryId(categoryId) {\n            if (categoryId && categoryId !== this.categoryId) {\n                this.categoryId = categoryId;\n                this.getList();\n            }\n        },\n\n        getList() {\n            this.isLoading = true;\n            const criteria = new Criteria(this.page, this.limit);\n            criteria.addAssociation('blogAuthor');\n            criteria.addAssociation('blogCategories');\n            criteria.addAssociation('tags');\n\n            criteria.addSorting(Criteria.sort('publishedAt', 'DESC', false));\n\n            if (this.categoryId) {\n                criteria.addFilter(Criteria.equals('blogCategories.id', this.categoryId));\n            }\n            return this.blogEntriesRepository.search(criteria, Shopware.Context.api).then((result) => {\n                this.total = result.total;\n                this.blogEntries = result;\n                this.isLoading = false;\n            });\n        },\n    },\n};\n"],"names":["template","Mixin","Criteria","index","newLanguageId","categoryId","criteria","result"],"mappings":"AAAA,MAAeA,EAAA,o9ECGT,CAAE,MAAAC,CAAO,EAAG,SACZC,EAAW,SAAS,KAAK,SAEhBC,EAAA,CACX,SAAAH,EAEA,OAAQ,CAAC,mBAAmB,EAE5B,OAAQ,CACJC,EAAM,UAAU,YAAY,EAC5BA,EAAM,UAAU,SAAS,CAC5B,EAED,MAAO,CACH,MAAO,CACH,WAAY,KACZ,YAAa,KACb,MAAO,EACP,UAAW,GACX,kBAAmB,SAAS,QAAQ,IAAI,UAC3C,CACJ,EAED,UAAW,CACP,MAAO,CACH,MAAO,KAAK,aAAc,CAC7B,CACJ,EAED,SAAU,CACN,KAAK,QAAS,CACjB,EAED,SAAU,CACN,uBAAwB,CACpB,OAAO,KAAK,kBAAkB,OAAO,oBAAoB,CAC5D,EAED,wBAAyB,CACrB,OAAO,KAAK,kBAAkB,OAAO,qBAAqB,CAC7D,EAED,YAAa,CACT,OAAO,SAAS,OAAO,UAAU,MAAM,CAC1C,EAED,SAAU,CACN,MAAO,CACH,CACI,SAAU,QACV,UAAW,QACX,MAAO,KAAK,IAAI,6BAA6B,EAC7C,WAAY,qBACZ,QAAS,GACT,WAAY,QACf,EACD,CACI,SAAU,SACV,MAAO,KAAK,IAAI,8BAA8B,EAC9C,WAAY,EACf,EACD,CACI,SAAU,cACV,MAAO,KAAK,IAAI,mCAAmC,EACnD,WAAY,EACf,EACD,CACI,SAAU,SACV,MAAO,KAAK,IAAI,8BAA8B,EAC9C,WAAY,SACf,CACJ,CACJ,CACJ,EAED,QAAS,CACL,eAAeG,EAAe,CAC1B,KAAK,kBAAoBA,EACzB,KAAK,QAAS,CACjB,EAED,iBAAiBC,EAAY,CACrBA,GAAcA,IAAe,KAAK,aAClC,KAAK,WAAaA,EAClB,KAAK,QAAS,EAErB,EAED,SAAU,CACN,KAAK,UAAY,GACjB,MAAMC,EAAW,IAAIJ,EAAS,KAAK,KAAM,KAAK,KAAK,EACnD,OAAAI,EAAS,eAAe,YAAY,EACpCA,EAAS,eAAe,gBAAgB,EACxCA,EAAS,eAAe,MAAM,EAE9BA,EAAS,WAAWJ,EAAS,KAAK,cAAe,OAAQ,EAAK,CAAC,EAE3D,KAAK,YACLI,EAAS,UAAUJ,EAAS,OAAO,oBAAqB,KAAK,UAAU,CAAC,EAErE,KAAK,sBAAsB,OAAOI,EAAU,SAAS,QAAQ,GAAG,EAAE,KAAMC,GAAW,CACtF,KAAK,MAAQA,EAAO,MACpB,KAAK,YAAcA,EACnB,KAAK,UAAY,EACjC,CAAa,CACJ,CACJ,CACL"}