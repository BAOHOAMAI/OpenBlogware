{"version":3,"file":"index-CDi_myr7.js","sources":["../../../app/administration/src/module/blog-module/extension/component/cms/werkl-cms-sidebar/werkl-cms-sidebar.html.twig","../../../app/administration/src/module/blog-module/extension/component/cms/werkl-cms-sidebar/index.js"],"sourcesContent":["{% block sw_cms_sidebar_page_settings %}\n    <sw-sidebar-item\n        ref=\"sidebarItem\"\n        icon=\"regular-info-circle\"\n        badge-type=\"error\"\n        :title=\"$tc('werkl-blog.detail.sidebar.heading')\"\n        :has-simple-badge=\"OpenBlogwareDetailError\"\n        :disabled=\"page.locked || disabled\"\n    >\n        {% block werkl_blog_cms_sidebar_page_basic_information %}\n        <sw-sidebar-collapse :expand-on-loading=\"true\">\n            {% block werkl_blog_cms_sidebar_page_basic_information_header %}\n            <template #header>\n                <span>\n                    {{ $tc('werkl-blog.detail.sidebar.basicInformation') }}\n                </span>\n            </template>\n            {% endblock %}\n\n        {% block werkl_blog_cms_sidebar_page_basic_information_form %}\n            <template #content>\n                <div class=\"sw-cms-sidebar__settings\">\n                    {% block werkl_blog_cms_sidebar_page_basic_information_title_field %}\n                    <mt-text-field\n                        required\n                        name=\"sw-field--blog-title\"\n                        v-model=\"blog.title\"\n                        :label=\"$tc('werkl-blog.detail.titleLabel')\"\n                        :placeholder=\"$tc('werkl-blog.detail.titlePlaceholder')\"\n                        :error=\"blogTitleError\"\n                    ></mt-text-field>\n                    {% endblock %}\n\n                {% block werkl_blog_cms_sidebar_page_basic_information_slug_field %}\n                    <mt-text-field\n                        required\n                        disabled\n                        name=\"sw-field--blog-slug\"\n                        v-model=\"blog.slug\"\n                        :label=\"$tc('werkl-blog.detail.slugLabel')\"\n                        :error=\"blogSlugError\"\n                        :placeholder=\"$tc('werkl-blog.detail.slugPlaceholder')\"\n                    ></mt-text-field>\n                    {% endblock %}\n                    <div class=\"sw-field\">\n                        <span class=\"sw-field__label\">URL</span>\n                        <a\n                            :href=\"`/blog/${blog.slug}`\"\n                            target=\"_blank\"\n                            class=\"werkl-blog-preview\"\n                        >\n                        /blog/{{blog.slug}}\n                    </a>\n                    </div>\n                    {% block werkl_blog_cms_sidebar_page_basic_information_teaser_field %}\n                    <mt-textarea\n                        type=\"textarea\"\n                        name=\"sw-field--blog-teaser\"\n                        v-model=\"blog.teaser\"\n                        :label=\"$tc('werkl-blog.detail.teaserLabel')\"\n                        :placeholder=\"$tc('werkl-blog.detail.teaserPlaceholder')\"\n                        :error=\"blogTeaserError\"\n                    ></mt-textarea>\n                    {% endblock %}\n\n                {% block werkl_blog_cms_sidebar_page_basic_information_image_field %}\n                    <sw-upload-listener\n                        :uploadTag=\"blog.id\"\n                        @media-upload-finish=\"onSetMediaItem\"\n                        autoUpload\n                    >\n                </sw-upload-listener>\n                    <sw-media-compact-upload-v2\n                        variant=\"regular\"\n                        :label=\"$tc('werkl-blog.detail.teaserImageLabel')\"\n                        :source=\"mediaItem\"\n                        :uploadTag=\"blog.id\"\n                        :defaultFolder=\"blog.getEntityName()\"\n                        :allowMultiSelect=\"false\"\n                        :fileAccept=\"fileAccept\"\n                        @media-upload-remove-image=\"onRemoveMediaItem\"\n                        @selection-change=\"setMedia\"\n                        @media-drop=\"onMediaDropped\"\n                    ></sw-media-compact-upload-v2>\n                    {% endblock %}\n                </div>\n            </template>\n            {% endblock %}\n        </sw-sidebar-collapse>\n        {% endblock %}\n\n    {% block werkl_blog_cms_sidebar_page_settings %}\n        <sw-sidebar-collapse :expand-on-loading=\"true\">\n            {% block werkl_blog_cms_sidebar_page_settings_header %}\n            <template #header>\n                <span>\n                    {{ $tc('werkl-blog.detail.sidebar.settings') }}\n                </span>\n            </template>\n            {% endblock %}\n\n        {% block werkl_blog_cms_sidebar_page_settings_form %}\n            <template #content>\n                <div class=\"sw-cms-sidebar__settings\">\n                    <div>\n                        {% block werkl_blog_cms_sidebar_page_settings_visibility_field %}\n                        <mt-switch\n                            type=\"switch\"\n                            class=\"werkl-field--switch\"\n                            name=\"sw-field--blog-active\"\n                            :label=\"$tc('werkl-blog.detail.visibility.label')\"\n                            v-model=\"blog.active\"\n                        >\n                    </mt-switch>\n                        {% endblock %}\n\n                    {% block werkl_blog_cms_sidebar_page_settings_detail_teaser_field %}\n                        <mt-switch\n                            type=\"switch\"\n                            class=\"werkl-field--switch\"\n                            name=\"sw-field--blog-detailTeaser\"\n                            :label=\"$tc('werkl-blog.detail.detailTeaser.label')\"\n                            v-model=\"blog.detailTeaserImage\"\n                        >\n                    </mt-switch>\n                        {% endblock %}\n                    </div>\n                    {% block werkl_blog_cms_sidebar_page_settings_published_at_field %}\n                    <mt-datepicker\n                        required\n                        dateType=\"date\"\n                        v-model=\"blog.publishedAt\"\n                        name=\"sw-field--blog-publishedAt\"\n                        :label=\"$tc('werkl-blog.detail.publishedAtLabel')\"\n                        :error=\"blogPublishedAtError\"\n                    ></mt-datepicker>\n                    {% endblock %}\n\n                {% block werkl_blog_cms_sidebar_page_settings_author_field %}\n                    <sw-entity-single-select\n                        required\n                        v-model:value=\"blog.authorId\"\n                        name=\"sw-field--blog-author\"\n                        labelProperty=\"translated.name\"\n                        class=\"werkl-field--author\"\n                        entity=\"werkl_blog_author\"\n                        :label=\"$tc('werkl-blog.detail.author.label')\"\n                        :placeholder=\"$tc('werkl-blog.detail.author.placeholder')\"\n                        :error=\"blogAuthorIdError\"\n                    >\n                        <template\n                            #selection-label-property=\"{item}\"\n                        >\n                            <span>\n                                {{ item.firstName }}\n                                {{ item.lastName }}\n                                <i>({{ item.email }})</i>\n                            </span>\n                        </template>\n\n                        <template #result-label-property=\"{item}\">\n                            <span>\n                                {{ item.firstName }}\n                                {{ item.lastName }}\n                                <i>({{ item.email }})</i>\n                            </span>\n                        </template>\n                    </sw-entity-single-select>\n                    {% endblock %}\n\n                {% block werkl_blog_cms_sidebar_page_settings_sales_channels %}\n                    <sw-entity-multi-id-select\n                        v-model:value=\"blogSalesChannelIds\"\n                        :repository=\"salesChannelRepository\"\n                        class=\"werkl-field--sales-channels\"\n                        :label=\"$tc('werkl-blog.detail.salesChannels.labelSalesChannels')\"\n                        :placeholder=\"$tc('werkl-blog.detail.salesChannels.placeholderSalesChannels')\"\n                    ></sw-entity-multi-id-select>\n                    {% endblock %}\n\n                {% block werkl_blog_cms_sidebar_page_settings_category_field %}\n                    <werkl-blog-category-tree-field\n                        required\n                        v-model:value=\"blog.blogCategories\"\n                        class=\"werkl-field--category\"\n                        name=\"sw-field--blog-categories\"\n                        :label=\"$tc('werkl-blog.detail.category.label')\"\n                        :placeholder=\"$tc('werkl-blog.detail.category.placeholder')\"\n                        :error=\"blogBlogCategoriesError\"\n                        :categoriesCollection=\"blog.blogCategories\"\n                    ></werkl-blog-category-tree-field>\n                    {% endblock %}\n                {% block werkl_blog_cms_sidebar_page_settings_tags %}\n                    <sw-entity-tag-select\n                        v-if=\"blog && !isLoading\"\n                        v-model:entityCollection=\"blog.tags\"\n                        class=\"sw-blog-detail-base__tags\"\n                        :label=\"$tc('werkl-blog.detail.tagsLabel')\"\n                        :placeholder=\"$tc('werkl-blog.detail.tagsPlaceholder')\"\n                    />\n                    {% endblock %}\n                </div>\n            </template>\n            {% endblock %}\n        </sw-sidebar-collapse>\n        {% endblock %}\n\n    {% block werkl_blog_cms_sidebar_page_serp %}\n        <sw-sidebar-collapse :expand-on-loading=\"true\">\n            {% block werkl_blog_cms_sidebar_page_serp_header %}\n            <template #header>\n                <span>\n                    {{ $tc('werkl-blog.detail.serp.title') }}\n                </span>\n            </template>\n            {% endblock %}\n\n        {% block werkl_blog_cms_sidebar_page_serp_form %}\n            <template #content>\n                <div\n                    class=\"sw-cms-sidebar__settings serp-preview-card\"\n                >\n                    <div class=\"serp-preview\">\n                        <h3>{{ blog.metaTitle }}</h3>\n                        <cite>{{ blog.slug }}</cite>\n                        <p>{{ blog.metaDescription }}</p>\n                    </div>\n                    {% block werkl_blog_cms_sidebar_page_serp_meta_title_field %}\n                    <mt-text-field\n                        v-model=\"blog.metaTitle\"\n                        :maxlength=\"maximumMetaTitleCharacter\"\n                        name=\"sw-field--blog-metaTitle\"\n                        :placeholder=\"$tc('werkl-blog.detail.serp.metaTitle')\"\n                    ></mt-text-field>\n                    {% endblock %}\n\n                {% block werkl_blog_cms_sidebar_page_serp_meta_description_field %}\n                    <mt-textarea\n                        type=\"textarea\"\n                        v-model=\"blog.metaDescription\"\n                        :maxlength=\"maximumMetaDescriptionCharacter\"\n                        name=\"sw-field--blog-metaDescription\"\n                        :placeholder=\"$tc('werkl-blog.detail.serp.metaDescription')\"\n                    ></mt-textarea>\n                    {% endblock %}\n                </div>\n            </template>\n            {% endblock %}\n        </sw-sidebar-collapse>\n        {% endblock %}\n    </sw-sidebar-item>\n{% endblock %}\n{% block sw_cms_sidebar_layout_assignment %}\n    {% block werkl_blog_cms_sidebar_extension_component %}\n        <werkl-blog-extension-component-sections\n            :position-identifier=\"positionIdentifierExtension\"\n            class=\"werkl-extension-component\"\n        >\n            <template #default=\"{ componentSection }\">\n                <sw-sidebar-item\n                    v-if=\"componentSection\"\n                    :icon=\"componentSection.props.icon\"\n                    badge-type=\"error\"\n                    :title=\"componentSection.props.title\"\n                    :disabled=\"page.locked || disabled\"\n                >\n                    <sw-iframe-renderer\n                        :src=\"componentSection.src\"\n                        :location-id=\"componentSection.props.locationId\"\n                    ></sw-iframe-renderer>\n                </sw-sidebar-item>\n            </template>\n        </werkl-blog-extension-component-sections>\n    {% endblock %}\n{% endblock %}","import errorConfig from '../../../../error-config.json';\nimport template from './werkl-cms-sidebar.html.twig';\nimport './werkl-cms-sidebar.scss';\n\nconst { Component } = Shopware;\nconst {\n    mapPageErrors,\n    mapPropertyErrors,\n} = Component.getComponentHelper();\n\nexport default {\n    template,\n\n    inject: [\n        'repositoryFactory',\n        'systemConfigApiService',\n    ],\n\n    props: {\n        blog: {\n            type: Object,\n            default: () => ({}),\n        },\n    },\n\n    data() {\n        return {\n            fileAccept: 'image/*',\n            maximumMetaTitleCharacter: 160,\n            maximumMetaDescriptionCharacter: 160,\n        };\n    },\n\n    created() {\n        this.createdComponent();\n    },\n\n    mounted() {\n        this.openBlogDetailSideBar();\n    },\n\n    computed: {\n        blogSalesChannelIds: {\n            get() {\n                return this.blog.customFields?.salesChannelIds || []\n            },\n            set(value) {\n                let salesChannelIds = null;\n                if (value && value.length > 0) {\n                    salesChannelIds = value;\n                }\n\n                this.blog.customFields = {\n                    ...this.blog.customFields,\n                    salesChannelIds,\n                }\n            },\n        },\n\n        salesChannelRepository() {\n            return this.repositoryFactory.create('sales_channel');\n        },\n\n        mediaRepository() {\n            return this.repositoryFactory.create('media');\n        },\n\n        tagRepository() {\n            return this.repositoryFactory.create('tag');\n        },\n\n        positionIdentifierExtension() {\n            return 'werkl-cms-sidebar-extension';\n        },\n\n        mediaItem() {\n            return this.blog && this.blog.media;\n        },\n\n        ...mapPageErrors(errorConfig),\n        ...mapPropertyErrors('blog', ['title', 'slug', 'teaser', 'authorId', 'publishedAt', 'blogCategories']),\n    },\n\n    methods: {\n        createdComponent() {\n            this.systemConfigApiService.getValues('WerklOpenBlogware.config').then(config => {\n                this.maximumMetaTitleCharacter = config['WerklOpenBlogware.config.maximumMetaTitleCharacter'];\n                this.maximumMetaDescriptionCharacter = config['WerklOpenBlogware.config.maximumMetaDescriptionCharacter'];\n            });\n        },\n\n        onSetMediaItem({ targetId }) {\n            return this.mediaRepository.get(targetId, Shopware.Context.api).then((updatedMedia) => {\n                this.blog.mediaId = targetId;\n                this.blog.media = updatedMedia;\n            });\n        },\n\n        setMedia([mediaItem]) {\n            this.blog.mediaId = mediaItem.id;\n            this.blog.media = mediaItem;\n        },\n\n        onRemoveMediaItem() {\n            this.blog.mediaId = null;\n            this.blog.media = null;\n        },\n\n        onMediaDropped(dropItem) {\n            this.onSetMediaItem({ targetId: dropItem.id });\n        },\n\n        openBlogDetailSideBar() {\n            this.$nextTick(() => {\n                if (!this.$refs.sidebarItem) {\n                    return;\n                }\n\n                if (typeof this.$refs.sidebarItem.openContent !== 'function') {\n                    return;\n                }\n\n                this.$refs.sidebarItem.openContent();\n            });\n        },\n    },\n};\n"],"names":["template","Component","mapPageErrors","mapPropertyErrors","index","_a","value","salesChannelIds","errorConfig","config","targetId","updatedMedia","mediaItem","dropItem"],"mappings":"wHAAeA,EAAA,ypOCIT,CAAE,UAAAC,CAAW,EAAG,SAChB,CACF,cAAAC,EACA,kBAAAC,CACJ,EAAIF,EAAU,mBAAoB,EAEnBG,EAAA,CACX,SAAAJ,EAEA,OAAQ,CACJ,oBACA,wBACH,EAED,MAAO,CACH,KAAM,CACF,KAAM,OACN,QAAS,KAAO,CAAA,EACnB,CACJ,EAED,MAAO,CACH,MAAO,CACH,WAAY,UACZ,0BAA2B,IAC3B,gCAAiC,GACpC,CACJ,EAED,SAAU,CACN,KAAK,iBAAkB,CAC1B,EAED,SAAU,CACN,KAAK,sBAAuB,CAC/B,EAED,SAAU,CACN,oBAAqB,CACjB,KAAM,OACF,QAAOK,EAAA,KAAK,KAAK,eAAV,YAAAA,EAAwB,kBAAmB,CAAA,CACrD,EACD,IAAIC,EAAO,CACP,IAAIC,EAAkB,KAClBD,GAASA,EAAM,OAAS,IACxBC,EAAkBD,GAGtB,KAAK,KAAK,aAAe,CACrB,GAAG,KAAK,KAAK,aACb,gBAAAC,CACpB,CACa,CACJ,EAED,wBAAyB,CACrB,OAAO,KAAK,kBAAkB,OAAO,eAAe,CACvD,EAED,iBAAkB,CACd,OAAO,KAAK,kBAAkB,OAAO,OAAO,CAC/C,EAED,eAAgB,CACZ,OAAO,KAAK,kBAAkB,OAAO,KAAK,CAC7C,EAED,6BAA8B,CAC1B,MAAO,6BACV,EAED,WAAY,CACR,OAAO,KAAK,MAAQ,KAAK,KAAK,KACjC,EAED,GAAGL,EAAcM,CAAW,EAC5B,GAAGL,EAAkB,OAAQ,CAAC,QAAS,OAAQ,SAAU,WAAY,cAAe,gBAAgB,CAAC,CACxG,EAED,QAAS,CACL,kBAAmB,CACf,KAAK,uBAAuB,UAAU,0BAA0B,EAAE,KAAKM,GAAU,CAC7E,KAAK,0BAA4BA,EAAO,oDAAoD,EAC5F,KAAK,gCAAkCA,EAAO,0DAA0D,CACxH,CAAa,CACJ,EAED,eAAe,CAAE,SAAAC,GAAY,CACzB,OAAO,KAAK,gBAAgB,IAAIA,EAAU,SAAS,QAAQ,GAAG,EAAE,KAAMC,GAAiB,CACnF,KAAK,KAAK,QAAUD,EACpB,KAAK,KAAK,MAAQC,CAClC,CAAa,CACJ,EAED,SAAS,CAACC,CAAS,EAAG,CAClB,KAAK,KAAK,QAAUA,EAAU,GAC9B,KAAK,KAAK,MAAQA,CACrB,EAED,mBAAoB,CAChB,KAAK,KAAK,QAAU,KACpB,KAAK,KAAK,MAAQ,IACrB,EAED,eAAeC,EAAU,CACrB,KAAK,eAAe,CAAE,SAAUA,EAAS,EAAE,CAAE,CAChD,EAED,uBAAwB,CACpB,KAAK,UAAU,IAAM,CACZ,KAAK,MAAM,aAIZ,OAAO,KAAK,MAAM,YAAY,aAAgB,YAIlD,KAAK,MAAM,YAAY,YAAa,CACpD,CAAa,CACJ,CACJ,CACL"}